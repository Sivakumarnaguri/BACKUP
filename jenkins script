#!/bin/bash

# Define the log file path
log_file="/tmp/1671700-linux-backup-storage-review/disk_usage.log"

# Initialize total size in KB
total_kb=0

# Process each line in the log file
while read -r line; do
    # Extract size (first field) and filename (rest of the line)
    size_kb=$(echo "$line" | awk '{print $1}')
    # Check if size is a number and greater than 5120KB (5MB)
    if [[ "$size_kb" =~ ^[0-9]+$ ]] && [ "$size_kb" -gt 5120 ]; then
        total_kb=$((total_kb + size_kb))
    fi
done < "$log_file"

# Convert KB to MB (1024KB = 1MB) and format to 2 decimal places
total_mb=$(echo "scale=2; $total_kb / 1024" | bc)

# Display the result with MB suffix
echo "${total_mb} MB"